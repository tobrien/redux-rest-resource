{"version":3,"sources":["../../src/defaults/index.js"],"names":["defaultActions","create","method","alias","fetch","isArray","get","update","delete","defaultHeaders","Accept","defaultTransformResponsePipeline","res","json","then","body","code","status","contentRange","headers","cr","prototype","parse","high","range","low","length","defaultState","isCreating","items","isFetching","lastUpdated","didInvalidate","item","isFetchingItem","lastUpdatedItem","didInvalidateItem","isUpdating","isDeleting","initialState","Object","keys","reduce","soFar","key","defaultGlobals","Promise"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAMA,iBAAiB;AACrBC,UAAQ,EAACC,QAAQ,MAAT,EAAiBC,OAAO,MAAxB,EADa;AAErBC,SAAO,EAACF,QAAQ,KAAT,EAAgBG,SAAS,IAAzB,EAFc;AAGrBC,OAAK,EAACJ,QAAQ,KAAT,EAHgB;AAIrBK,UAAQ,EAACL,QAAQ,OAAT,EAJa;AAKrBM,UAAQ,EAACN,QAAQ,QAAT;AALa,CAAvB;;AAQA,IAAMO,iBAAiB;AACrBC,UAAQ,kBADa;AAErB,kBAAgB;AAFK,CAAvB;;AAKA,IAAMC,mCAAmC,CACvC,UAACC,GAAD;AAAA,SAASA,IAAIC,IAAJ,GAAWC,IAAX,CAAgB;AAAA,WAAS,EAACC,UAAD,EAAOC,MAAMJ,IAAIK,MAAjB,EAAyBC,cAAcN,IAAIO,OAAJ,CAAYb,GAAZ,CAAgB,eAAhB,CAAvC,EAAT;AAAA,GAAhB,CAAT;AAAA,CADuC,EAEvC,UAACM,GAAD,EAAS;AACP,MAAMM,eAAeN,IAAIM,YAAzB;;AAEA,MAAIA,YAAJ,EAAkB;AAChB,QAAME,KAAK,wBAAaC,SAAb,CAAuBC,KAAvB,CAA6BJ,YAA7B,CAAX;AACAN,QAAIM,YAAJ,GAAmB;AACjBK,YAAMH,GAAGI,KAAH,CAASD,IADE;AAEjBE,WAAKL,GAAGI,KAAH,CAASC,GAFG;AAGjBC,cAAQN,GAAGM;AAHM,KAAnB;AAKD;AACD,SAAOd,GAAP;AACD,CAdsC,CAAzC;;AAiBA,IAAMe,eAAe;AACnB1B,UAAQ;AACN2B,gBAAY;AADN,GADW;AAInBxB,SAAO;AACLyB,WAAO,EADF;AAELC,gBAAY,KAFP;AAGLC,iBAAa,CAHR;AAILC,mBAAe,IAJV;AAKLd,kBAAc;AACZK,YAAM,CADM;AAEZE,WAAK,CAFO;AAGZC,cAAQ;AAHI;AALT,GAJY;AAenBpB,OAAK;AACH2B,UAAM,IADH;AAEHC,oBAAgB,KAFb;AAGHC,qBAAiB,CAHd;AAIHC,uBAAmB;AAJhB,GAfc;AAqBnB7B,UAAQ;AACN8B,gBAAY;AADN,GArBW;AAwBnB7B,UAAQ;AACN8B,gBAAY;AADN;AAxBW,CAArB;;AA6BA,IAAMC,eAAeC,OAAOC,IAAP,CAAYd,YAAZ,EAA0Be,MAA1B,CAAiC,UAACC,KAAD,EAAQC,GAAR;AAAA,sBAAqBD,KAArB,EAA+BhB,aAAaiB,GAAb,CAA/B;AAAA,CAAjC,EAAqF,EAArF,CAArB;;AAEA,IAAMC,iBAAiB;AACrBC;AADqB,CAAvB;;QAKED,c,GAAAA,c;QACA7C,c,GAAAA,c;QACAS,c,GAAAA,c;QACAE,gC,GAAAA,gC;QACAgB,Y,GAAAA,Y;QACAY,Y,GAAAA,Y","file":"index.js","sourcesContent":["import { ContentRange } from 'http-range';\n\nconst defaultActions = {\n  create: {method: 'POST', alias: 'save'},\n  fetch: {method: 'GET', isArray: true},\n  get: {method: 'GET'},\n  update: {method: 'PATCH'},\n  delete: {method: 'DELETE'}\n};\n\nconst defaultHeaders = {\n  Accept: 'application/json',\n  'Content-Type': 'application/json'\n};\n\nconst defaultTransformResponsePipeline = [\n  (res) => res.json().then(body => ({body, code: res.status, contentRange: res.headers.get('Content-Range')})),\n  (res) => {\n    const contentRange = res.contentRange;\n\n    if (contentRange) {\n      const cr = ContentRange.prototype.parse(contentRange);\n      res.contentRange = {\n        high: cr.range.high,\n        low: cr.range.low,\n        length: cr.length\n      };\n    }\n    return res;\n  }\n];\n\nconst defaultState = {\n  create: {\n    isCreating: false\n  },\n  fetch: {\n    items: [],\n    isFetching: false,\n    lastUpdated: 0,\n    didInvalidate: true,\n    contentRange: {\n      high: 0,\n      low: 0,\n      length: 0\n    },\n  },\n  get: {\n    item: null,\n    isFetchingItem: false,\n    lastUpdatedItem: 0,\n    didInvalidateItem: true\n  },\n  update: {\n    isUpdating: false\n  },\n  delete: {\n    isDeleting: false\n  }\n};\n\nconst initialState = Object.keys(defaultState).reduce((soFar, key) => ({...soFar, ...defaultState[key]}), {});\n\nconst defaultGlobals = {\n  Promise\n};\n\nexport {\n  defaultGlobals,\n  defaultActions,\n  defaultHeaders,\n  defaultTransformResponsePipeline,\n  defaultState,\n  initialState\n};\n"]}